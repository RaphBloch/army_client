{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Raphael Bloch\\\\Desktop\\\\Internet\\\\armee_client\\\\armee_client\\\\src\\\\components\\\\Screen.js\";\nimport React, { Component, useRef } from 'react';\nimport socketIOClient from \"socket.io-client\";\nimport '../Style/Style.css';\nconst ENDPOINT = \"http://127.0.0.1:4000\";\n\nclass Screen extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      altitude: 0,\n      HIS: 0,\n      ADI: 0,\n      visual: 'graphic'\n    };\n    this.canvasRef = React.createRef();\n    console.log('Constructor');\n  }\n\n  componentDidMount() {\n    console.log('New Connection');\n    const socket = new socketIOClient(ENDPOINT);\n    socket.on(\"Data\", data => {\n      this.setState({\n        altitude: data[0],\n        HIS: data[1],\n        ADI: data[2]\n      });\n    });\n    const canvas = this.canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    var radius = canvas.height / 2;\n    ctx.translate(radius, radius);\n    radius = radius * 0.90;\n    const data_ = this.state;\n    drawClock(data_);\n\n    function drawClock(data_) {\n      var grad; //draw the face\n\n      ctx.beginPath();\n      ctx.arc(0, 0, radius, 0, 2 * Math.PI);\n      ctx.fillStyle = 'white';\n      ctx.fill();\n      grad = ctx.createRadialGradient(0, 0, radius * 0.95, 0, 0, radius * 1.05);\n      grad.addColorStop(0, '#333');\n      grad.addColorStop(0.5, 'white');\n      grad.addColorStop(1, '#333');\n      ctx.strokeStyle = grad;\n      ctx.lineWidth = radius * 0.1;\n      ctx.stroke();\n      ctx.beginPath();\n      ctx.arc(0, 0, radius * 0.1, 0, 2 * Math.PI);\n      ctx.fillStyle = '#333';\n      ctx.fill(); //draw the numbers\n\n      var ang;\n      var num;\n      ctx.font = radius * 0.15 + \"px arial\";\n      ctx.textBaseline = \"middle\";\n      ctx.textAlign = \"center\";\n\n      for (num = 0; num < 4; num++) {\n        ang = num * Math.PI / 2;\n        console.log(num);\n        ctx.rotate(ang);\n        ctx.translate(0, -radius * 0.85);\n        ctx.rotate(-ang);\n        ctx.fillText((90 * num).toString(), 0, 0);\n        ctx.rotate(ang);\n        ctx.translate(0, radius * 0.85);\n        ctx.rotate(-ang);\n      }\n    }\n\n    console.log('Component');\n  }\n\n  change_visualToText() {\n    this.setState({\n      visual: 'text'\n    });\n  }\n\n  change_visualToGraphic() {\n    this.setState({\n      visual: 'graphic'\n    });\n  }\n\n  componentDidUpdate() {\n    console.log('canvas');\n    console.log(this.state.HIS);\n    const canvas = this.canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    console.log(ctx.textBaseline);\n    var ang = this.state.HIS * (Math.PI / 180);\n    ctx.rotate(ang);\n  }\n\n  render() {\n    /*  var radius = canvas.height / 2;\r\n      ctx.translate(radius, radius);\r\n      radius = radius * 0.90\r\n      drawClock();\r\n        function drawClock() {\r\n          ctx.arc(0, 0, radius, 0 , 2 * Math.PI);\r\n          ctx.fillStyle = \"white\";\r\n          ctx.fill();\r\n      }*/\n    let blue = \"50%\";\n    let green = \"50%\";\n    console.log('render');\n    const data = this.state;\n\n    if (data.ADI > 0) {\n      blue = (data.ADI / 2 + 53).toString() + \"%\";\n      green = (100 - (data.ADI / 2 + 47)).toString() + \"%\";\n    } else {\n      green = (-data.ADI / 2 + 53).toString() + \"%\";\n      blue = (100 - (-data.ADI / 2 + 47)).toString() + \"%\";\n    }\n\n    console.log(data.ADI);\n    let text = \"hidden\";\n    let graphic = \"visible\";\n    let altitude = (300 - data.altitude / 10).toString() + \"px\";\n    console.log(altitude);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 16\n      }\n    }, \"Hello \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"button_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button\",\n      id: \"text_btn\",\n      onClick: this.change_visualToText.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 25\n      }\n    }, \"Text\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button\",\n      id: \"visual_btn\",\n      onClick: this.change_visualToGraphic.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 25\n      }\n    }, \"Visual\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button\",\n      id: \"data_btn\",\n      onClick: this.getData.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 25\n      }\n    }, \"Get Data\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text_container\",\n      style: {\n        display: this.state.visual == 'text' ? \"flex\" : \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 29\n      }\n    }, \"Altitude:\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 29\n      }\n    }, \" \", this.state.altitude, \" M \")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 29\n      }\n    }, \" HIS\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 29\n      }\n    }, \" \", this.state.HIS, \" M \")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 29\n      }\n    }, \"ADI:\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 29\n      }\n    }, \" \", this.state.ADI, \" M \"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"graphic_container\",\n      style: {\n        display: this.state.visual == 'graphic' ? \"flex\" : \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"altitude_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"hr\", {\n      style: {\n        marginTop: altitude\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 31\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bar-value\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      id: \"3000\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 35\n      }\n    }, \"3000\"), /*#__PURE__*/React.createElement(\"li\", {\n      id: \"2000\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 35\n      }\n    }, \"2000\"), /*#__PURE__*/React.createElement(\"li\", {\n      id: \"1000\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 35\n      }\n    }, \"1000\"), /*#__PURE__*/React.createElement(\"li\", {\n      id: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 35\n      }\n    }, \"0\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"HIS_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"canvas\", {\n      ref: this.canvasRef,\n      width: 300,\n      height: 300,\n      style: {\n        backgroundcolor: 'white'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ADI_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"circle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"green\",\n      style: {\n        width: green\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blue\",\n      style: {\n        width: blue\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 33\n      }\n    }))))));\n  }\n\n}\n\nexport default Screen;","map":{"version":3,"sources":["C:/Users/Raphael Bloch/Desktop/Internet/armee_client/armee_client/src/components/Screen.js"],"names":["React","Component","useRef","socketIOClient","ENDPOINT","Screen","constructor","props","state","altitude","HIS","ADI","visual","canvasRef","createRef","console","log","componentDidMount","socket","on","data","setState","canvas","current","ctx","getContext","radius","height","translate","data_","drawClock","grad","beginPath","arc","Math","PI","fillStyle","fill","createRadialGradient","addColorStop","strokeStyle","lineWidth","stroke","ang","num","font","textBaseline","textAlign","rotate","fillText","toString","change_visualToText","change_visualToGraphic","componentDidUpdate","render","blue","green","text","graphic","bind","getData","display","marginTop","backgroundcolor","width"],"mappings":"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","sourcesContent":["import React,{Component , useRef} from 'react';\r\nimport socketIOClient from \"socket.io-client\";\r\nimport  '../Style/Style.css'\r\n\r\nconst ENDPOINT = \"http://127.0.0.1:4000\";\r\n\r\n\r\nclass Screen extends  Component\r\n{\r\n\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n\r\n        this.state ={\r\n            altitude: 0,\r\n            HIS : 0,\r\n            ADI : 0,\r\n            visual : 'graphic'\r\n        };\r\n        this.canvasRef = React.createRef();\r\n        console.log('Constructor');\r\n        \r\n    }\r\n\r\n    componentDidMount(){\r\n\r\n        console.log('New Connection');\r\n        const socket = new socketIOClient(ENDPOINT);\r\n        socket.on(\"Data\", data => {\r\n            this.setState({altitude : data[0],HIS : data[1],ADI : data[2]});\r\n        });\r\n        const canvas = this.canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        var radius = canvas.height / 2;\r\n        ctx.translate(radius, radius);\r\n        radius = radius * 0.90;\r\n        const data_ = this.state;\r\n        drawClock(data_);\r\n\r\n        function drawClock(data_) {\r\n            var grad;\r\n\r\n\r\n            //draw the face\r\n            ctx.beginPath();\r\n            ctx.arc(0, 0, radius, 0, 2 * Math.PI);\r\n            ctx.fillStyle = 'white';\r\n            ctx.fill();\r\n\r\n            grad = ctx.createRadialGradient(0, 0 ,radius * 0.95, 0, 0, radius * 1.05);\r\n            grad.addColorStop(0, '#333');\r\n            grad.addColorStop(0.5, 'white');\r\n            grad.addColorStop(1, '#333');\r\n            ctx.strokeStyle = grad;\r\n            ctx.lineWidth = radius*0.1;\r\n            ctx.stroke();\r\n\r\n            ctx.beginPath();\r\n            ctx.arc(0, 0, radius * 0.1, 0, 2 * Math.PI);\r\n            ctx.fillStyle = '#333';\r\n            ctx.fill();\r\n\r\n            //draw the numbers\r\n            var ang;\r\n            var num;\r\n            ctx.font = radius * 0.15 + \"px arial\";\r\n            ctx.textBaseline = \"middle\";\r\n            ctx.textAlign = \"center\";\r\n\r\n            for(num = 0; num < 4; num++){\r\n                ang = num * Math.PI / 2 ;\r\n                console.log(num);\r\n                ctx.rotate(ang);\r\n                ctx.translate(0, -radius * 0.85);\r\n                ctx.rotate(-ang);\r\n                ctx.fillText((90*num).toString(), 0, 0);\r\n                ctx.rotate(ang);\r\n                ctx.translate(0, radius * 0.85);\r\n                ctx.rotate(-ang);\r\n            }\r\n        }\r\n        console.log('Component');\r\n\r\n\r\n\r\n    }\r\n\r\n    change_visualToText()\r\n    {\r\n       this.setState({visual : 'text'});\r\n    }\r\n\r\n\r\n    change_visualToGraphic()\r\n    {\r\n        this.setState({visual : 'graphic'});\r\n    }\r\n\r\n    componentDidUpdate() \r\n    {\r\n        console.log('canvas');\r\n        console.log(this.state.HIS);\r\n        const canvas = this.canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        console.log(ctx.textBaseline);\r\n        var ang =this.state.HIS * (Math.PI/180);\r\n        ctx.rotate(ang);\r\n    }\r\n\r\n\r\n\r\n    render()\r\n    {\r\n\r\n\r\n\r\n\r\n        /*  var radius = canvas.height / 2;\r\n          ctx.translate(radius, radius);\r\n          radius = radius * 0.90\r\n          drawClock();\r\n\r\n          function drawClock() {\r\n              ctx.arc(0, 0, radius, 0 , 2 * Math.PI);\r\n              ctx.fillStyle = \"white\";\r\n              ctx.fill();\r\n          }*/\r\n        let blue = \"50%\";\r\n        let green = \"50%\";\r\n\r\n\r\n        console.log('render');\r\n        const data = this.state;\r\n\r\n\r\n        if(data.ADI > 0  ) {\r\n            blue = (data.ADI / 2 + 53).toString() + \"%\";\r\n            green = (100 - (data.ADI / 2 + 47)).toString() + \"%\";\r\n        }\r\n        else\r\n        {\r\n            green = ((-data.ADI) / 2 + 53).toString() + \"%\" ;\r\n            blue = (100 - ((-data.ADI) / 2 + 47)).toString() + \"%\";\r\n        }\r\n\r\n\r\n        console.log(data.ADI);\r\n\r\n\r\n        let text = \"hidden\";\r\n        let graphic = \"visible\";\r\n\r\n\r\n        let altitude = (300 -data.altitude/10).toString()+\"px\";\r\n\r\n        console.log(altitude);\r\n\r\n        return(\r\n\r\n            <div>\r\n\r\n               <h1>Hello </h1>\r\n\r\n                <div className=\"container\">\r\n                    <div className=\"button_container\">\r\n                        <button className=\"button\" id=\"text_btn\"  onClick={this.change_visualToText.bind(this)}  >Text</button>\r\n                        <button  className=\"button\" id=\"visual_btn\"  onClick={this.change_visualToGraphic.bind(this)} >Visual</button>\r\n\r\n                        <button  className=\"button\" id=\"data_btn\"  onClick={this.getData.bind(this)} >Get Data</button>\r\n                    </div>\r\n                    <div className=\"text_container\" style={{ display : this.state.visual == 'text' ? \"flex\" : \"none\"}}>\r\n\r\n                        <div className=\"card\">\r\n                            <div className=\"card-header\">Altitude:</div>\r\n                            <div className=\"card-body\"> {this.state.altitude} M </div>\r\n                        </div>\r\n\r\n                        <div className=\"card\">\r\n                            <div className=\"card-header\"> HIS</div>\r\n                            <div className=\"card-body\"> {this.state.HIS} M </div>\r\n                        </div>\r\n\r\n                        <div className=\"card\">\r\n                            <div className=\"card-header\">ADI:</div>\r\n                            <div className=\"card-body\"> {this.state.ADI} M </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div className=\"graphic_container\" style={ { display : this.state.visual == 'graphic' ? \"flex\" : \"none\"} }>\r\n                        <div className=\"altitude_container\">\r\n                          <div className=\"bar\">\r\n                              <hr style = {{ marginTop:  altitude }}/>\r\n                              <div className=\"bar-value\">\r\n                                  <li id=\"3000\">3000</li>\r\n                                  <li id=\"2000\">2000</li>\r\n                                  <li id=\"1000\">1000</li>\r\n                                  <li id=\"0\">0</li>\r\n\r\n                              </div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"HIS_container\">\r\n                            <canvas ref={this.canvasRef} width={300} height={300} style={{ backgroundcolor: 'white'}}></canvas>\r\n\r\n                        </div>\r\n                        <div className=\"ADI_container\">\r\n                            <div className=\"circle\" >\r\n                                <div className=\"green\" style={{ width : green}}></div>\r\n                                <div className=\"blue\" style={{ width : blue}}></div>\r\n                             </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default Screen;"]},"metadata":{},"sourceType":"module"}